<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Identifiers of administrative units (municipalities or BSU) are subject to change. Most changes occur because of top-level mergers or splits. When the identifiers change over time, it is impossible to cleanly estimate fixed effects or to distinguish between individuals moving vs. simply the identifier changing. This package harmonizes administrative units into clusters which are uniquely tractable across the whole period, specified by the user.">
<title>Harmonizing Norwegian Administrative Identifiers • NGeoTrack</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Harmonizing Norwegian Administrative Identifiers">
<meta property="og:description" content="Identifiers of administrative units (municipalities or BSU) are subject to change. Most changes occur because of top-level mergers or splits. When the identifiers change over time, it is impossible to cleanly estimate fixed effects or to distinguish between individuals moving vs. simply the identifier changing. This package harmonizes administrative units into clusters which are uniquely tractable across the whole period, specified by the user.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">NGeoTrack</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/LaurinCurschellas/NGeoTrack/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ngeotrack">NGeoTrack<a class="anchor" aria-label="anchor" href="#ngeotrack"></a>
</h1></div>
<div class="section level3">
<h3 id="harmonizing-norwegian-administrative-identifiers">Harmonizing Norwegian Administrative Identifiers<a class="anchor" aria-label="anchor" href="#harmonizing-norwegian-administrative-identifiers"></a>
</h3>
<p>Identifiers of administrative units can change over time. Most changes occur because of top-level unit (such as counties) mergers or splits. Inconsistent identifiers can inhibit the use of simple fixed effects or make it impossible to distinctly identify individuals who move.</p>
<p>This package harmonizes administrative units into clusters that are uniquely tractable across the whole period, specified by the user. It assigns new, stable identifiers to each administrative unit, and allows for joint harmonizing of a low- and top-level type of administrative unit.</p>
<p><strong><em>Important Note</em></strong>: The procedure is an extension to, and largely based on the following two repositories. In case you use these functions, make sure to cite the original authors. ~ <a href="https://youtu.be/8bh238ekw3%5D(https://github.com/helseprofil/norgeo)https://github.com/helseprofil/norgeo" title="@embed" class="external-link">Norgeo</a>, and <a href="https://github.com/eirikberger/NoRwayGeo" title="@NoRwayGeo" class="external-link">NoRwayGeo</a></p>
<p>The official changes and lists of valid location codes are published by Statistics Norway (<a href="https://www.ssb.no/klass/klassifikasjoner/1" title="@SSB" class="external-link">SSB</a>)</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools") </span></span>
<span><span class="co"># library(devtools)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"https://github.com/LaurinCurschellas/NGeoTrack"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Dependencies</strong>: <a href="https://dplyr.tidyverse.org/" title="@dplyr" class="external-link"><code>dplyr</code></a>, <a href="https://httr2.r-lib.org/" title="@httr2" class="external-link"><code>httr2</code></a>, and <a href="https://igraph.org/" title="@igraph" class="external-link"><code>igraph</code></a></p>
</div>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<div class="section level4">
<h4 id="gather_change">
<a href="https://laurincurschellas.github.io/NGeoTrack/reference/gather_change.html" title="@GatherChange"><code>gather_change()</code></a><a class="anchor" aria-label="anchor" href="#gather_change"></a>
</h4>
<p>Calls the API of Statistics Norway and gathers all the official changes reported to the selected administrative unit in the defined period.<br>
Syntax:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gather_change.html">gather_change</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"grunnkrets"</span> , from <span class="op">=</span> <span class="fl">1990</span> , to <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span></code></pre></div>
<p>The function applies to BSU (<code>"grunnkrets"</code>), municipalities (<code>"kommune"</code>) and counties (<code>"fylket"</code>).<br>
The current release of <a href="@SSB">SSB</a> supports data for the years 1980-2023 and 1950-2023 for BSU and municipalities respectively.</p>
</div>
<div class="section level4">
<h4 id="status_quo">
<a href="https://laurincurschellas.github.io/NGeoTrack/reference/status_quo.html" title="@StatusQuo"><code>status_quo()</code></a><a class="anchor" aria-label="anchor" href="#status_quo"></a>
</h4>
<p>Calls the API and gathers all the valid codes for the full panel of the specified period.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/status_quo.html">status_quo</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"grunnkrets"</span> , from <span class="op">=</span> <span class="fl">1990</span> , to <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="ete_changes">
<a href="https://laurincurschellas.github.io/NGeoTrack/reference/EtE_changes.html" title="@EtEChanges"><code>EtE_changes()</code></a><a class="anchor" aria-label="anchor" href="#ete_changes"></a>
</h4>
<p><strong>This is the core function</strong>: It generates tractable clusters, and returns a data frame that acts as a key to assign all observations to their respective cluster. The input for this function is the datasets generated by the above functions.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/EtE_changes.html">EtE_changes</a></span><span class="op">(</span>df_status <span class="op">=</span> <span class="va">data2</span> , df_change <span class="op">=</span> <span class="va">data1</span> , from <span class="op">=</span> <span class="fl">1990</span> , to <span class="op">=</span> <span class="fl">2022</span>, jointly <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<p><strong>Joint harmonization of BSU and Municipality identifiers</strong>:<br>
The changes and status quo data sets have to be generated for each type individually, and supplied as a list to <code><a href="reference/EtE_changes.html">EtE_changes()</a></code> - the harmonizing function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">changes_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">changes_bsu</span>, <span class="va">changes_mun</span><span class="op">)</span> <span class="co"># The order in list is not relevant. </span></span>
<span><span class="va">status_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">status_bsu</span>, <span class="va">status_mun</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/EtE_changes.html">EtE_changes</a></span><span class="op">(</span>df_status <span class="op">=</span> <span class="va">status_list</span> , df_change <span class="op">=</span> <span class="va">changes_list</span> , from <span class="op">=</span> <span class="fl">1990</span> , to <span class="op">=</span> <span class="fl">2022</span>, jointly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="check_overlap">
<a href="https://laurincurschellas.github.io/NGeoTrack/reference/check_overlap.html" title="@Overlap"><code>check_overlap()</code></a><a class="anchor" aria-label="anchor" href="#check_overlap"></a>
</h4>
<p>This function analyses the generated key and returns information on BSU-clusters that overlap the borders of municipality clusters.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>overlap <span class="ot">&lt;-</span> <span class="fu">check_overlap</span>(df_key) <span class="co"># Prints an overview to the console, summarising the detailed output</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># Vector of affected Grunnkrets Clusters</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">head</span>(overlap<span class="sc">$</span>candidates)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">100124</span> <span class="dv">100125</span> <span class="dv">102230</span> <span class="dv">100016</span> <span class="dv">100373</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co"># Dataframe of municipality details</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="fu">head</span>(overlap<span class="sc">$</span>details)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co"># A tibble: 5 × 5</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>  Gcluster_id Ccluster_id_1 Ccluster_id_2 Cname_1     Cname_2          </span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>        <span class="sc">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span>            </span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="dv">1</span>      <span class="dv">100124</span>           <span class="dv">528</span>           <span class="dv">529</span> Østre Toten Vestre Toten     </span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="dv">2</span>      <span class="dv">100125</span>           <span class="dv">528</span>           <span class="dv">529</span> Østre Toten Vestre Toten     </span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="dv">3</span>      <span class="dv">102230</span>          <span class="dv">1444</span>          <span class="dv">1449</span> Hornindal   Stryn            </span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="dv">4</span>      <span class="dv">100016</span>          <span class="dv">1911</span>        <span class="dv">500023</span> Kvæfjord    Sortland <span class="sc">-</span> Suortá</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="dv">5</span>      <span class="dv">100373</span>           <span class="dv">704</span>        <span class="dv">500016</span> Tønsberg    Sandefjord  </span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="background-administrative-units-in-norway">Background Administrative Units in Norway<a class="anchor" aria-label="anchor" href="#background-administrative-units-in-norway"></a>
</h2>
<ul>
<li><p><strong>Basic Statistical Units</strong> (BSU/Grunnkrets) The Basic Statistical Units (BSU), also referred to as Grunnkrets, are the most granular administrative units in the Norwegian administration. As of January 2022, there are a total of 14’100 such units. These units are largely used for administrative purposes by the municipality and national administrators and have a median population size of 250 inhabitants as of 2018.</p></li>
<li><p><strong>Municipalities</strong> (Kommune) The municipalities are on the higher level administrative unit with their own administration. Municipalities provide some of the public infrastructure independently and serve as a political unit. As of January 2022, there are a total of 356 municipalities in Norway. The median population size of a municipality lies at 4’669 inhabitants as of 2018.</p></li>
<li><p><strong>County</strong> (Fylke) The counties are the highest-order administrative unit in Norway. They serve as a political unit and provide certain public administrative and service tasks. Norway is comprised of a total of 15 counties.</p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/LaurinCurschellas/NGeoTrack/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing NGeoTrack</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Laurin Curschellas <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Laurin Curschellas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
